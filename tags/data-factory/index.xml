<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Data Factory on Adrián Abreu</title><link>https://adrianabreu.com/tags/data-factory/</link><description>Recent content in Data Factory on Adrián Abreu</description><generator>Hugo</generator><language>es-ES</language><copyright>2017-2024 Adrián Abreu powered by Hugo and Kiss Theme</copyright><lastBuildDate>Thu, 01 Oct 2020 10:12:32 +0000</lastBuildDate><atom:link href="https://adrianabreu.com/tags/data-factory/index.xml" rel="self" type="application/rss+xml"/><item><title>Jugando con Data Factory</title><link>https://adrianabreu.com/blog/2020-10-01-jugando-con-df/</link><pubDate>Thu, 01 Oct 2020 10:12:32 +0000</pubDate><guid>https://adrianabreu.com/blog/2020-10-01-jugando-con-df/</guid><description>&lt;p>Sorprendentemente, hasta ahora, no había tenido la posibilidad de trabajar con data factory, sólo lo habia usado para algunas migraciones de datos.&lt;/p>
&lt;p>Sin embargo, tras estabilizar un proyecto y consolidar su nueva etapa, necesitabamos simplificar la solución implementada para migrar datos.&lt;/p>
&lt;p>Una representación sencilla de la arquitectura actual sería:&lt;/p>
&lt;p>&lt;img src="https://adrianabreu.com/images/data-factory/original-architecture.png" alt="Arquitectura actual">&lt;/p>
&lt;p>En un flujo muy sencillo sería esto:&lt;/p>
&lt;ol>
&lt;li>La etl escribe un fichero csv con spark en un directorio de un blob storage.&lt;/li>
&lt;li>La primera function filtra los ficheros de spark que no son part- y se encarga de notificar a una function que actua de gateway para el batch con que fichero queremos enviar, el nombre original, el path y el nombre que queremos darle.&lt;/li>
&lt;li>Esta function de gateway se encarga de realizar las llamadas necesarias a la api de Azure para generar una tarea en el batch.&lt;/li>
&lt;li>El batch se encarga de comprimir el fichero y enviarlo al sftp del cliente, recuperando las credenciales según el tipo de fichero que se trate.&lt;/li>
&lt;/ol>
&lt;p>Este proceso nos permitía trabajar con dos versiones del proyecto en lo que hacíamos la migración a la nueva versión. Ahora que la nueva versión ya está consolidada y hemos conseguido además que el cliente utilice un formato de compresión que podemos escribir directamente desde spark sin recurrir al batch, es el momento de cambiar la arquitectura de transferencia de datos.&lt;/p></description></item></channel></rss>